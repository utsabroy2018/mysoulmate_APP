"use strict";(self.webpackChunkhoroscope=self.webpackChunkhoroscope||[]).push([[560],{1560:(k,m,a)=>{a.r(m),a.d(m,{Upload_photoModule:()=>Y});var g=a(6895),u=a(2340),r=a(5412),t=a(4650),d=a(4859);let _=(()=>{class o{constructor(e,i){this.dialogRef=e,this.data=i}onNoClick(){this.dialogRef.close()}ngOnInit(){}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(r.so),t.Y36(r.WI))};static#i=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-dialog-body"]],decls:7,vars:1,consts:[["mat-dialog-title","",1,"dialogBoxTitle"],[1,"dialogBoxBtnGroup"],["mat-dialog-close","","mat-dialog-close","true","mat-raised-button","",1,"dialogBoxBtnFill"],["mat-raised-button","","mat-dialog-close","","mat-dialog-close","false"]],template:function(i,s){1&i&&(t.TgZ(0,"h2",0),t._uU(1),t.qZA(),t.TgZ(2,"mat-dialog-actions",1)(3,"button",2),t._uU(4,"Yes"),t.qZA(),t.TgZ(5,"button",3),t._uU(6,"No"),t.qZA()()),2&i&&(t.xp6(1),t.Oqu(s.data.name))},dependencies:[d.lW,r.ZT,r.uh,r.H8]})}return o})();var v=a(2498),p=a(2761),b=a(191),U=a(1481),y=a(5543),T=a(5105);function Z(o,c){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",27),t.NdJ("click",function(){t.CHM(e);const s=t.MAs(6);return t.KtG(s.click())}),t._UZ(2,"i",28),t._uU(3," Choose Photo"),t.qZA(),t.TgZ(4,"input",29,30),t.NdJ("change",function(s){t.CHM(e);const l=t.oxw();return t.KtG(l.onMultyplPhotSele(s))}),t.qZA(),t.BQk()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("disabled",e.listOfFiles.length>=5)}}function D(o,c){1&o&&(t.ynx(0),t.TgZ(1,"button",31),t._UZ(2,"i",28),t._uU(3," Choose Photo"),t.qZA(),t.BQk()),2&o&&(t.xp6(1),t.Q6J("disabled",!0))}function I(o,c){1&o&&(t.TgZ(0,"div",32),t._uU(1," You have Chose more than 5 Images "),t.qZA())}function F(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"div",16)(1,"div",33),t._UZ(2,"img",34),t.TgZ(3,"button",35),t.NdJ("click",function(){const s=t.CHM(e),l=s.index,n=s.$implicit,h=t.oxw();return t.KtG(h.removeMultyImg(l,n.id,n.index>=0?n.index:-1))}),t._UZ(4,"i",36),t.qZA()()()}if(2&o){const e=c.$implicit;t.xp6(2),t.Q6J("src",e.filePath,t.LSH)}}function O(o,c){1&o&&(t.TgZ(0,"p"),t._uU(1,"Loading....."),t.qZA())}let S=(()=>{class o{constructor(e,i,s,l,n,h,J){this.service=e,this.router=i,this.msgService=s,this.sanitizer=l,this.sds=n,this.matDialog=h,this.location=J,this.fileList=[],this.listOfFiles=[],this.isLoading=!1,this.fileList_single=[],this.listOfFiles_single=[],this.isLoading_single=!1,this.isDisabled=!0,this.isShow=!0,this.submit_isDisabled=!0,this.upload_isDisabled=!1,this.name="Angular",this.transform={},this.isSave=!1,this.contain_within_aspect_ratio=!0,this.cropround=!1,this.getLocalSecrectUrl=this.sds.getLocalSecrectData(),this.alertBoxTxt="Do you want to delete permantly?"}ngOnInit(){this.localstorageDT={id:this.getLocalSecrectUrl.data.id,user_name:this.getLocalSecrectUrl.data.user_name},this.imageBaseUrl=u.N.api_url+"/uploads/",this.getGalleryPhoto(),this.get_Single_Photo()}goBack(){this.location.back()}onMultyplPhotSele(e){this.upload_isDisabled=!1,this.isLoading=!0,this.isShow=!0,e.target.files.length>0&&e.target.files.length<=5&&(this.isDisabled=!1),e.target.files.length>5&&(this.isShow=!1);for(var i=0;i<=e.target.files.length-1;i++){var s=e.target.files[i];"image/png"==s.type||"image/jpeg"==s.type||"image/jpg"==s.type?(this.fileList.push(s),this.listOfFiles.push({id:0,filePath:this.sanitizer.bypassSecurityTrustResourceUrl(URL.createObjectURL(s)),index:i}),this.msgService.successMsg("PHOTO_UP_CORECT")):this.msgService.errorMsg("PHOTO_NOTUP_CORECT"),this.listOfFiles.length>=0&&this.listOfFiles.length<=5?(this.submit_isDisabled=!1,this.upload_isDisabled=!0):(this.submit_isDisabled=!0,this.upload_isDisabled=!1)}this.isLoading=!1,this.uploadMUltyImg()}removeMultyImg(e,i,s){this.matDialog.open(_,{width:"350px",data:{name:this.alertBoxTxt}}).afterClosed().subscribe(n=>{console.log(n,"this.animal"),"true"==n&&(i>0?this.service.global_service(0,"/kyc/single_pic_delete",`id=${i}`).subscribe(h=>{this.imgDelResp=h,this.imgDelResp.suc>0&&this.listOfFiles.splice(e,1)}):(this.listOfFiles.splice(e,1),s>=0&&this.fileList.splice(s,1),this.listOfFiles.length<=5&&(this.submit_isDisabled=!1),this.listOfFiles.length<1&&(this.submit_isDisabled=!0)))})}getGalleryPhoto(){this.service.global_service(0,"/kyc/get_profile_pic",`user_id=${this.localstorageDT.id}`).subscribe(e=>{var i;if(i=(i=e).suc>0&&atob(i.msg),this.lodedGalleryImg=JSON.parse(i),this.lodedGalleryImg.length>0){this.listOfFiles.length=0;for(let s of this.lodedGalleryImg)this.listOfFiles.push({id:s.id,filePath:this.imageBaseUrl+s.file_path})}})}uploadMUltyImg(){this.formData=new FormData;for(let e of this.fileList)this.formData.append("prof_img",e);this.formData.append("user_id",this.localstorageDT.id),this.formData.append("user",this.localstorageDT.user_name),this.formData.append("edite_Flag","1"),this.listOfFiles.length>0&&this.listOfFiles.length<=5&&(this.isDisabled=!1,this.service.global_service(1,"/kyc/profile_pic",this.formData).subscribe(e=>{this.responGallery=e,this.responGallery.suc>0?(this.fileList=[],this.isDisabled=!0,this.getGalleryPhoto()):this.msgService.successMsg("EU")}))}on_Single_PhotSele(e){var i=e.target.files[0];this.listOfFiles_single.length=0,this.listOfFiles_single.push({id:0,filePath:this.sanitizer.bypassSecurityTrustResourceUrl(URL.createObjectURL(i))});const s=new FormData;s.append("profile_img",i),s.append("user_id",this.localstorageDT.id),s.append("user",this.localstorageDT.user_name),s.append("edite_Flag","1"),this.service.global_service(1,"/profile/upload_profile_pic",s).subscribe(l=>{this.responGallery_single=l,this.responGallery_single.suc>0&&(this.msgService.successMsg("SU"),this.get_Single_Photo())})}get_Single_Photo(){this.service.global_service(0,"/profile/profile_pic",`user_id=${this.localstorageDT.id}`).subscribe(e=>{var i;i=(i=e).suc>0&&atob(i.msg),this.loded_single_img=JSON.parse(i),this.listOfFiles_single.length=0;for(let s of this.loded_single_img)this.listOfFiles_single.push({id:s.id,filePath:this.imageBaseUrl+s.file_path})})}open_crop_modal(){this.el=document.getElementById("id01"),this.el.style.display="block"}zoomOut(){this.scale-=.1,this.transform={...this.transform,scale:this.scale}}zoomIn(){this.scale+=.1,this.transform={...this.transform,scale:this.scale}}imageLoaded(){this.showCropper=!0,this.modal=!1,this.hide=!1,this.valu=!1}imageCropped(e){this.croppedImage=e.base64,"tab4"==this.show_tab&&(this.preview_for_section=this.croppedImage)}cropperReady(e){}loadImageFailed(){}close_modal_on_crop(){this.modal_close_oncrop=document.getElementById("id01"),this.modal_close_oncrop.style.display="none"}saveCroppedImg(){this.valu=!0,this.img_cover=this.croppedImage;const i=this.img_name,s=this.dataURItoBlob(this.croppedImage),l=new File([s],i,{type:"image/png"});this.img_cover=l,this.el.style.display="none";const n=new FormData;n.append("profile_img",this.img_cover),n.append("user_id",this.localstorageDT.id),n.append("user",this.localstorageDT.user_name),n.append("edite_Flag","1"),this.service.global_service(1,"/profile/upload_profile_pic",n).subscribe(h=>{this.responGallery_single=h,this.responGallery_single.suc>0&&(this.msgService.successMsg("SU"),this.get_Single_Photo())})}dataURItoBlob(e){var i=atob(e.toString().split(",")[1]);const s=[];for(var l=0;l<i.length;l++)s.push(i.charCodeAt(l));return new Blob([new Uint8Array(s)],{type:"image/png"})}section_img_upload(e){this.cropround=!1,this.aspect_ratio="3/2",this.contain_within_aspect_ratio=!1,this.crop_height=500,this.crop_min_height=200,this.crop_width=600,this.crop_min_width=180,window.URL||window,new Image,this.profileImgName=e.target.files[0].name,this.img_name=this.profileImgName,this.profileImgName=e,this.img_cover=this.profileImgName,this.logo_file1=document.getElementById("logo_crop"),this.logo_file1.click()}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(v.D),t.Y36(p.F0),t.Y36(b.e),t.Y36(U.H7),t.Y36(y.U),t.Y36(r.uw),t.Y36(g.Ye))};static#i=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-upload_photo"]],decls:40,vars:5,consts:[[1,"forResponsiveHeader_login"],[1,"innerMain_wraper"],[1,"wrapper"],[1,"col-sm-12","float-left","portfolio_right"],[1,"sectionTitle_Res","mb-3"],[1,"backBtn",3,"click"],["src","assets/images/turn-back.png","alt",""],[1,"portfolio_right_sub"],[1,"portfolio_form_fill"],[1,"title_sec"],["src","assets/images/uploadPhoto_white.png","alt",""],[1,"id_verify_main"],[1,"form-group","row"],[1,"col-sm-9"],[1,"field_outer_label"],[4,"ngIf"],[1,"col-sm-3"],[1,"form-group","row","mb-0","galleryPhoto"],["class","uploadNotice",4,"ngIf"],["class","col-sm-3",4,"ngFor","ngForOf"],[1,"footer_bottomSec"],["routerLink","/profile_list",1,"profList_link_bot"],["aria-hidden","true",1,"fa","fa-users"],["routerLink","/wishlist",1,"wish_link_bot"],["aria-hidden","true",1,"fa","fa-heart"],["routerLink","/user_dashboard",1,"dash_link_bot"],["aria-hidden","true",1,"fa","fa-tachometer"],[1,"uploadImgGal",3,"disabled","click"],[1,"fa","fa-upload"],["type","file",2,"display","none",3,"change"],["attachments","","fileInput",""],[1,"uploadImgGal",3,"disabled"],[1,"uploadNotice"],[1,"galaryImg"],["alt","","srcset","",3,"src"],["mat-icon-button","",1,"removeImg",3,"click"],["aria-hidden","true",1,"fa","fa-times-circle"]],template:function(i,s){1&i&&(t.TgZ(0,"div",0),t._UZ(1,"app-headerResponsive"),t.qZA(),t.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"button",5),t.NdJ("click",function(){return s.goBack()}),t._UZ(7,"img",6),t._uU(8," Back"),t.qZA()(),t.TgZ(9,"div",7)(10,"div",8)(11,"div",9)(12,"h2"),t._UZ(13,"img",10),t._uU(14,"Add Maximum 5 Photos. Each Images Size Max 5 mb. Accepted Format jpg, jpeg, png "),t.qZA()(),t.TgZ(15,"div",11)(16,"div",12)(17,"div",13)(18,"div",14),t.YNc(19,Z,7,1,"ng-container",15),t.YNc(20,D,4,1,"ng-container",15),t.qZA()(),t.TgZ(21,"div",16),t._UZ(22,"div",14),t.qZA()(),t.TgZ(23,"div",17),t.YNc(24,I,2,0,"div",18),t.YNc(25,F,5,1,"div",19),t.qZA(),t.YNc(26,O,2,0,"p",15),t.qZA()()()()()(),t.TgZ(27,"div",20)(28,"a",21),t._UZ(29,"i",22),t.TgZ(30,"span"),t._uU(31,"Matches"),t.qZA()(),t.TgZ(32,"a",23),t._UZ(33,"i",24),t.TgZ(34,"span"),t._uU(35,"My Wishlist"),t.qZA()(),t.TgZ(36,"a",25),t._UZ(37,"i",26),t.TgZ(38,"span"),t._uU(39,"Dashboard"),t.qZA()()()),2&i&&(t.xp6(19),t.Q6J("ngIf",s.listOfFiles.length<5),t.xp6(1),t.Q6J("ngIf",s.listOfFiles.length>=5),t.xp6(4),t.Q6J("ngIf",s.fileList.length>5||s.listOfFiles.length>5),t.xp6(1),t.Q6J("ngForOf",s.listOfFiles),t.xp6(1),t.Q6J("ngIf",s.isLoading))},dependencies:[g.sg,g.O5,p.rH,T.A,d.RK]})}return o})();var C=a(4077),f=a(4006),L=a(4385),x=a(1948),B=a(6709),A=a(8398),R=a(8874),P=a(9873),N=a(7392),M=a(9549),G=a(4144);const w=[{path:"",component:S}];let Y=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#i=this.\u0275mod=t.oAB({type:o});static#e=this.\u0275inj=t.cJS({imports:[g.ez,C.G,R.I,p.Bz.forChild(w),f.u5,P.W,f.UX,G.c,L.LD,M.lN,x.Fk,B.p9,N.Ps,A.QG,d.ot,r.Is]})}return o})()}}]);