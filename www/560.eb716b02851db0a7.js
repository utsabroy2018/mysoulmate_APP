"use strict";(self.webpackChunkhoroscope=self.webpackChunkhoroscope||[]).push([[560],{1560:(M,d,l)=>{l.r(d),l.d(d,{Upload_photoModule:()=>R});var g=l(6895),u=l(2340),r=l(5412),t=l(4650),p=l(4859);let _=(()=>{class o{constructor(e,i){this.dialogRef=e,this.data=i}onNoClick(){this.dialogRef.close()}ngOnInit(){}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(r.so),t.Y36(r.WI))};static#i=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-dialog-body"]],decls:7,vars:1,consts:[["mat-dialog-title","",1,"dialogBoxTitle"],[1,"dialogBoxBtnGroup"],["mat-dialog-close","","mat-dialog-close","true","mat-raised-button","",1,"dialogBoxBtnFill"],["mat-raised-button","","mat-dialog-close","","mat-dialog-close","false"]],template:function(i,s){1&i&&(t.TgZ(0,"h2",0),t._uU(1),t.qZA(),t.TgZ(2,"mat-dialog-actions",1)(3,"button",2),t._uU(4,"Yes"),t.qZA(),t.TgZ(5,"button",3),t._uU(6,"No"),t.qZA()()),2&i&&(t.xp6(1),t.Oqu(s.data.name))},dependencies:[p.lW,r.ZT,r.uh,r.H8]})}return o})();var v=l(2498),m=l(2761),b=l(191),y=l(1481),U=l(5543);function T(o,c){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",17),t.NdJ("click",function(){t.CHM(e);const s=t.MAs(6);return t.KtG(s.click())}),t._UZ(2,"i",18),t._uU(3," Choose Photo"),t.qZA(),t.TgZ(4,"input",19,20),t.NdJ("change",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.onMultyplPhotSele(s))}),t.qZA(),t.BQk()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("disabled",e.listOfFiles.length>=5)}}function D(o,c){1&o&&(t.ynx(0),t.TgZ(1,"button",21),t._UZ(2,"i",18),t._uU(3," Choose Photo"),t.qZA(),t.BQk()),2&o&&(t.xp6(1),t.Q6J("disabled",!0))}function I(o,c){1&o&&(t.TgZ(0,"div",22),t._uU(1," You have Chose more than 5 Images "),t.qZA())}function F(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"div",13)(1,"div",23),t._UZ(2,"img",24),t.TgZ(3,"button",25),t.NdJ("click",function(){const s=t.CHM(e),a=s.index,n=s.$implicit,h=t.oxw();return t.KtG(h.removeMultyImg(a,n.id,n.index>=0?n.index:-1))}),t._UZ(4,"i",26),t.qZA()()()}if(2&o){const e=c.$implicit;t.xp6(2),t.Q6J("src",e.filePath,t.LSH)}}function O(o,c){1&o&&(t.TgZ(0,"p"),t._uU(1,"Loading....."),t.qZA())}let Z=(()=>{class o{constructor(e,i,s,a,n,h,G){this.service=e,this.router=i,this.msgService=s,this.sanitizer=a,this.sds=n,this.matDialog=h,this.location=G,this.fileList=[],this.listOfFiles=[],this.isLoading=!1,this.fileList_single=[],this.listOfFiles_single=[],this.isLoading_single=!1,this.isDisabled=!0,this.isShow=!0,this.submit_isDisabled=!0,this.upload_isDisabled=!1,this.name="Angular",this.transform={},this.isSave=!1,this.contain_within_aspect_ratio=!0,this.cropround=!1,this.getLocalSecrectUrl=this.sds.getLocalSecrectData(),this.alertBoxTxt="Do you want to delete permantly?"}ngOnInit(){this.localstorageDT={id:this.getLocalSecrectUrl.data.id,user_name:this.getLocalSecrectUrl.data.user_name},this.imageBaseUrl=u.N.api_url+"/uploads/",this.getGalleryPhoto(),this.get_Single_Photo()}goBack(){this.location.back()}onMultyplPhotSele(e){this.upload_isDisabled=!1,this.isLoading=!0,this.isShow=!0,e.target.files.length>0&&e.target.files.length<=5&&(this.isDisabled=!1),e.target.files.length>5&&(this.isShow=!1);for(var i=0;i<=e.target.files.length-1;i++){var s=e.target.files[i];"image/png"==s.type||"image/jpeg"==s.type||"image/jpg"==s.type?(this.fileList.push(s),this.listOfFiles.push({id:0,filePath:this.sanitizer.bypassSecurityTrustResourceUrl(URL.createObjectURL(s)),index:i}),this.msgService.successMsg("PHOTO_UP_CORECT")):this.msgService.errorMsg("PHOTO_NOTUP_CORECT"),this.listOfFiles.length>=0&&this.listOfFiles.length<=5?(this.submit_isDisabled=!1,this.upload_isDisabled=!0):(this.submit_isDisabled=!0,this.upload_isDisabled=!1)}this.isLoading=!1,this.uploadMUltyImg()}removeMultyImg(e,i,s){this.matDialog.open(_,{width:"350px",data:{name:this.alertBoxTxt}}).afterClosed().subscribe(n=>{console.log(n,"this.animal"),"true"==n&&(i>0?this.service.global_service(0,"/kyc/single_pic_delete",`id=${i}`).subscribe(h=>{this.imgDelResp=h,this.imgDelResp.suc>0&&this.listOfFiles.splice(e,1)}):(this.listOfFiles.splice(e,1),s>=0&&this.fileList.splice(s,1),this.listOfFiles.length<=5&&(this.submit_isDisabled=!1),this.listOfFiles.length<1&&(this.submit_isDisabled=!0)))})}getGalleryPhoto(){this.service.global_service(0,"/kyc/get_profile_pic",`user_id=${this.localstorageDT.id}`).subscribe(e=>{var i;if(i=(i=e).suc>0&&atob(i.msg),this.lodedGalleryImg=JSON.parse(i),this.lodedGalleryImg.length>0){this.listOfFiles.length=0;for(let s of this.lodedGalleryImg)this.listOfFiles.push({id:s.id,filePath:this.imageBaseUrl+s.file_path})}})}uploadMUltyImg(){this.formData=new FormData;for(let e of this.fileList)this.formData.append("prof_img",e);this.formData.append("user_id",this.localstorageDT.id),this.formData.append("user",this.localstorageDT.user_name),this.formData.append("edite_Flag","1"),this.listOfFiles.length>0&&this.listOfFiles.length<=5&&(this.isDisabled=!1,this.service.global_service(1,"/kyc/profile_pic",this.formData).subscribe(e=>{this.responGallery=e,this.responGallery.suc>0?(this.fileList=[],this.isDisabled=!0,this.getGalleryPhoto()):this.msgService.successMsg("EU")}))}on_Single_PhotSele(e){var i=e.target.files[0];this.listOfFiles_single.length=0,this.listOfFiles_single.push({id:0,filePath:this.sanitizer.bypassSecurityTrustResourceUrl(URL.createObjectURL(i))});const s=new FormData;s.append("profile_img",i),s.append("user_id",this.localstorageDT.id),s.append("user",this.localstorageDT.user_name),s.append("edite_Flag","1"),this.service.global_service(1,"/profile/upload_profile_pic",s).subscribe(a=>{this.responGallery_single=a,this.responGallery_single.suc>0&&(this.msgService.successMsg("SU"),this.get_Single_Photo())})}get_Single_Photo(){this.service.global_service(0,"/profile/profile_pic",`user_id=${this.localstorageDT.id}`).subscribe(e=>{var i;i=(i=e).suc>0&&atob(i.msg),this.loded_single_img=JSON.parse(i),this.listOfFiles_single.length=0;for(let s of this.loded_single_img)this.listOfFiles_single.push({id:s.id,filePath:this.imageBaseUrl+s.file_path})})}open_crop_modal(){this.el=document.getElementById("id01"),this.el.style.display="block"}zoomOut(){this.scale-=.1,this.transform={...this.transform,scale:this.scale}}zoomIn(){this.scale+=.1,this.transform={...this.transform,scale:this.scale}}imageLoaded(){this.showCropper=!0,this.modal=!1,this.hide=!1,this.valu=!1}imageCropped(e){this.croppedImage=e.base64,"tab4"==this.show_tab&&(this.preview_for_section=this.croppedImage)}cropperReady(e){}loadImageFailed(){}close_modal_on_crop(){this.modal_close_oncrop=document.getElementById("id01"),this.modal_close_oncrop.style.display="none"}saveCroppedImg(){this.valu=!0,this.img_cover=this.croppedImage;const i=this.img_name,s=this.dataURItoBlob(this.croppedImage),a=new File([s],i,{type:"image/png"});this.img_cover=a,this.el.style.display="none";const n=new FormData;n.append("profile_img",this.img_cover),n.append("user_id",this.localstorageDT.id),n.append("user",this.localstorageDT.user_name),n.append("edite_Flag","1"),this.service.global_service(1,"/profile/upload_profile_pic",n).subscribe(h=>{this.responGallery_single=h,this.responGallery_single.suc>0&&(this.msgService.successMsg("SU"),this.get_Single_Photo())})}dataURItoBlob(e){var i=atob(e.toString().split(",")[1]);const s=[];for(var a=0;a<i.length;a++)s.push(i.charCodeAt(a));return new Blob([new Uint8Array(s)],{type:"image/png"})}section_img_upload(e){this.cropround=!1,this.aspect_ratio="3/2",this.contain_within_aspect_ratio=!1,this.crop_height=500,this.crop_min_height=200,this.crop_width=600,this.crop_min_width=180,window.URL||window,new Image,this.profileImgName=e.target.files[0].name,this.img_name=this.profileImgName,this.profileImgName=e,this.img_cover=this.profileImgName,this.logo_file1=document.getElementById("logo_crop"),this.logo_file1.click()}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(v.D),t.Y36(m.F0),t.Y36(b.e),t.Y36(y.H7),t.Y36(U.U),t.Y36(r.uw),t.Y36(g.Ye))};static#i=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-upload_photo"]],decls:23,vars:5,consts:[[1,"col-sm-12","float-left","portfolio_right"],[1,"sectionTitle_Res","mb-3"],[1,"backBtn",3,"click"],["src","assets/images/turn-back.png","alt",""],[1,"portfolio_right_sub"],[1,"portfolio_form_fill"],[1,"title_sec"],["src","assets/images/uploadPhoto_white.png","alt",""],[1,"id_verify_main"],[1,"form-group","row"],[1,"col-sm-9"],[1,"field_outer_label"],[4,"ngIf"],[1,"col-sm-3"],[1,"form-group","row","mb-0","galleryPhoto"],["class","uploadNotice",4,"ngIf"],["class","col-sm-3",4,"ngFor","ngForOf"],[1,"uploadImgGal",3,"disabled","click"],[1,"fa","fa-upload"],["type","file",2,"display","none",3,"change"],["attachments","","fileInput",""],[1,"uploadImgGal",3,"disabled"],[1,"uploadNotice"],[1,"galaryImg"],["alt","","srcset","",3,"src"],["mat-icon-button","",1,"removeImg",3,"click"],["aria-hidden","true",1,"fa","fa-times-circle"]],template:function(i,s){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"button",2),t.NdJ("click",function(){return s.goBack()}),t._UZ(3,"img",3),t._uU(4," Back"),t.qZA()(),t.TgZ(5,"div",4)(6,"div",5)(7,"div",6)(8,"h2"),t._UZ(9,"img",7),t._uU(10,"Add Maximum 5 Photos. Each Images Size Max 5 mb. Accepted Format jpg, jpeg, png "),t.qZA()(),t.TgZ(11,"div",8)(12,"div",9)(13,"div",10)(14,"div",11),t.YNc(15,T,7,1,"ng-container",12),t.YNc(16,D,4,1,"ng-container",12),t.qZA()(),t.TgZ(17,"div",13),t._UZ(18,"div",11),t.qZA()(),t.TgZ(19,"div",14),t.YNc(20,I,2,0,"div",15),t.YNc(21,F,5,1,"div",16),t.qZA(),t.YNc(22,O,2,0,"p",12),t.qZA()()()()),2&i&&(t.xp6(15),t.Q6J("ngIf",s.listOfFiles.length<5),t.xp6(1),t.Q6J("ngIf",s.listOfFiles.length>=5),t.xp6(4),t.Q6J("ngIf",s.fileList.length>5||s.listOfFiles.length>5),t.xp6(1),t.Q6J("ngForOf",s.listOfFiles),t.xp6(1),t.Q6J("ngIf",s.isLoading))},dependencies:[g.sg,g.O5,p.RK]})}return o})();var f=l(4006),S=l(4385),C=l(1948),x=l(6709),B=l(8398),L=l(7392),P=l(9549),N=l(4144);const A=[{path:"",component:Z,data:{pageName:"uploadphoto"}}];let R=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#i=this.\u0275mod=t.oAB({type:o});static#e=this.\u0275inj=t.cJS({imports:[g.ez,m.Bz.forChild(A),f.u5,f.UX,N.c,S.LD,P.lN,C.Fk,x.p9,L.Ps,B.QG,p.ot,r.Is]})}return o})()}}]);