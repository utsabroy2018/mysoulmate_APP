"use strict";(self.webpackChunkhoroscope=self.webpackChunkhoroscope||[]).push([[758],{6758:(Q,p,o)=>{o.r(p),o.d(p,{Otp_loginModule:()=>I});var d=o(6895),a=o(4006),e=o(4650),f=o(2498),h=o(2761),m=o(191),v=o(5543),_=o(4144),g=o(9549),O=o(4238),T=o(1582),c=o(2440);const M=["ngOtpInput"];function S(n,u){if(1&n&&(e.TgZ(0,"div",27)(1,"div",28),e._uU(2),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.hij(" ",null==t.afterLoginMsg?null:t.afterLoginMsg.msg," ")}}function Z(n,u){if(1&n){const t=e.EpF();e.TgZ(0,"ng-otp-input",39,40),e.NdJ("onInputChange",function(i){e.CHM(t);const r=e.oxw(2);return e.KtG(r.onOtpChange(i))}),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("config",t.config)}}function P(n,u){if(1&n){const t=e.EpF();e.TgZ(0,"div",29)(1,"label",30)(2,"div",31)(3,"p",32),e._uU(4,"Enter verification code"),e.qZA(),e.YNc(5,Z,2,1,"ng-otp-input",33),e.qZA()(),e.TgZ(6,"label",34)(7,"button",12),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.resendOTP())}),e._UZ(8,"i",35),e._uU(9," Resend OTP"),e.qZA(),e.TgZ(10,"span"),e._uU(11),e.qZA()(),e.TgZ(12,"div",36)(13,"span"),e._uU(14," Your Otp has Expired"),e.qZA()(),e.TgZ(15,"div",37)(16,"input",38),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.login_Fn())}),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(5),e.Q6J("ngIf",t.showOtpComponent),e.xp6(6),e.Oqu(t.display_new),e.xp6(1),e.Q6J("hidden",t.showExpairMsg),e.xp6(4),e.Q6J("disabled",!t.otpFormGroup.valid||!t.verifyBtnActive)}}let U=(()=>{class n{constructor(t,s,i,r){this.service=t,this.router=s,this.msgService=i,this.sds=r,this.withoutLogin_headerShow=!0,this.afterLogin_headerShow=!0,this.signUpMsg=!0,this.hide_Send_OTP=!1,this.afterSendOTP_Click=!0,this.deActiveUser_Msg_Show=!0,this.showOtpMainBox=!0,this.showExpairMsg=!0,this.generateOTP_btn=!0,this.showOtpComponent=!0,this.config={allowNumbersOnly:!1,length:4,isPasswordInput:!1,disableAutoFocus:!1,placeholder:"",inputStyles:{width:"40px",height:"35px"}},this.getLocalSecrectUrl=this.sds.getLocalSecrectData(),this.otpFormGroup=new a.cw({otp_phone:new a.NI("",[a.kI.required,a.kI.minLength(10),a.kI.pattern("^((\\+91-?)|0)?[0-9]{10}$")])}),this.isLogin=this.service.login(),this.isLogin?(this.afterLogin_headerShow=!1,this.withoutLogin_headerShow=!0):(this.afterLogin_headerShow=!0,this.withoutLogin_headerShow=!1)}ngOnInit(){}timer_new(t){clearInterval(this.timerInt);let s=60*t,i="0",r=60;const l=t<10?"0":"";this.timerInt=setInterval(()=>{s--,0!=r?r--:r=59,i=r<10?"0"+r:r,this.display_new=`${l}${Math.floor(s/60)}:${i}`,"00:00"==this.display_new?(this.showExpairMsg=!1,clearInterval(this.timerInt)):this.showExpairMsg=!0},1e3)}resendOTP(){this.generateOTP(),this.timer_new(5)}onOtpChange(t){this.otp=t,4==this.otp.length?this.getOTP==this.otp?this.verifyBtnActive=!0:(this.verifyBtnActive=!1,this.msgService.errorMsg("OTP_NOT_MAT")):this.verifyBtnActive=!1}generateOTP(){this.service.global_service(1,"/user/login_otp",{data:btoa(JSON.stringify(this.otpFormGroup.controls.otp_phone.value))}).subscribe(t=>{this.getOPTResponse=t,1===this.getOPTResponse.suc&&(this.getOTP=this.sds.decrypt(this.getOPTResponse.otp)),2===this.getOPTResponse.suc&&this.msgService.errorMsg("MWRNG_MOB")})}sendOTP_login(t){this.signUpMsg=!0,this.deActiveUser_Msg_Show=!0,this.mobileNumber=this.otpFormGroup.controls.otp_phone.value.length,this.service.global_service(1,"/user/login_otp",{data:btoa(JSON.stringify(this.otpFormGroup.controls.otp_phone.value))}).subscribe(s=>{this.afterLoginMsg=s,1===this.afterLoginMsg.suc&&(this.deActiveUser_Msg_Show=!0,this.getOTP=this.sds.decrypt(this.afterLoginMsg.otp),10==this.mobileNumber&&this.otpFormGroup.valid?(this.afterSendOTP_Click=!1,this.hide_Send_OTP=!0,this.signUpMsg=!0,this.deActiveUser_Msg_Show=!0,this.generateOTP_btn=!1,this.showOtpMainBox=!0,this.timer_new(5)):(this.generateOTP_btn=!0,clearInterval(this.timerInt))),0===this.afterLoginMsg.suc&&(this.deActiveUser_Msg_Show=!1,this.signUpMsg=!0,this.deActiveUser_Msg=this.afterLoginMsg.msg),2===this.afterLoginMsg.suc&&(this.deActiveUser_Msg_Show=!0,this.signUpMsg=!1,this.deActiveUser_Msg=this.afterLoginMsg.msg)})}editeMobileNum(){this.afterSendOTP_Click=!0,this.hide_Send_OTP=!1}login_Fn(){this.loginDataStore={user_id:this.otpFormGroup.controls.otp_phone.value},this.getOTP==this.otp?this.service.global_service(1,"/user/get_login_data",{data:btoa(JSON.stringify(this.loginDataStore))}).subscribe(t=>{if(this.login_Data_respons=t,this.login_Data_respons.suc>0){const{plan_id:s,pay_name:i,id:r,user_email:l,user_id:y,user_name:F,profile_code:J}=this.login_Data_respons.user_data[0];this.sds.setLocalSecrectData({login_success:1,plan_id:s,pay_name:i,id:r,user_email:l,user_id:y,user_name:F,profile_code:J,profile_flag:this.login_Data_respons.user_data[0].profile_verify_flag?this.login_Data_respons.user_data[0].profile_verify_flag:"N"}),this.router.navigate(["/profile_list"]),this.currentUser={login_success:this.getLocalSecrectUrl.data.login_success,id:this.getLocalSecrectUrl.data.id,user_id:this.getLocalSecrectUrl.data.user_id,user_name:this.getLocalSecrectUrl.data.user_name}}else localStorage.setItem("login_success","0")}):this.msgService.errorMsg("OTP_NOT_MAT")}nameShort(){return this.otpFormGroup.controls.otp_phone.value.slice(0,4)+"XXXXXX"}static#e=this.\u0275fac=function(s){return new(s||n)(e.Y36(f.D),e.Y36(h.F0),e.Y36(m.e),e.Y36(v.U))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-otp_login"]],viewQuery:function(s,i){if(1&s&&e.Gf(M,5),2&s){let r;e.iGM(r=e.CRH())&&(i.ngOtpInput=r.first)}},decls:48,vars:12,consts:[[1,"rejistrationPageLogo","rejistrationPageLogo_Page"],[3,"hidden"],[1,"innerMain_wraper"],[1,"otp_wrapper"],[1,"col-sm-12"],[1,"white_block","white_blockOTP"],[1,"row"],[1,"title_sec_main"],[1,"innerDefaultPage"],[1,"iLaWub",3,"hidden"],[1,"otpMsg"],[1,"editOtp"],[3,"click"],[1,"otpField_Main"],["class","deActiveUser_Msg_otp",4,"ngIf"],[1,"otpField_Main_sub",3,"formGroup","hidden"],[1,"otpField_Sub_field"],[1,"field_outer_label","field_outer_label_OTP"],[1,"example-full-width"],["matInput","","type","tel","formControlName","otp_phone","minlength","10","maxlength","10"],[1,"validation_OTP",3,"hidden"],["routerLink","/home"],["type","button","value","Send OTP",3,"disabled","click"],["class","otpMain",4,"ngIf"],[1,"footer_bottomSec"],["routerLink","/home",1,"login_link_bot"],["aria-hidden","true",1,"fa","fa-sign-in"],[1,"deActiveUser_Msg_otp"],[1,"deActiveUser_Msg_otp_Sub"],[1,"otpMain"],[1,"otp"],[1,"field_outer_label","field_outer_labelOTPLogin"],[1,"a-o-i"],[3,"config","onInputChange",4,"ngIf"],[1,"resendOtp"],["aria-hidden","true",1,"fa","fa-refresh"],[1,"otpExpair",3,"hidden"],[1,"loginwithOTP"],["type","submit","value","Login",1,"otpLoginBtn",3,"disabled","click"],[3,"config","onInputChange"],["ngOtpInput",""]],template:function(s,i){1&s&&(e.TgZ(0,"div",0),e._UZ(1,"app-Before_login_header_N_Home",1),e.qZA(),e.TgZ(2,"div",0),e._UZ(3,"app-after_login_header_Global",1),e.qZA(),e.TgZ(4,"div",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",4)(10,"div",7)(11,"h2"),e._uU(12,"Login with OTP "),e.qZA()(),e.TgZ(13,"div",8)(14,"div",9)(15,"div",10),e._uU(16),e.qZA(),e.TgZ(17,"div",11)(18,"a",12),e.NdJ("click",function(){return i.editeMobileNum()}),e._uU(19,"Edit"),e.qZA()()(),e.TgZ(20,"h3",1),e._uU(21,"Enter Mobile No."),e.qZA(),e.TgZ(22,"h4",1),e._uU(23,"We will send you an OTP to login"),e.qZA(),e.TgZ(24,"div",13),e.YNc(25,S,3,1,"div",14),e.TgZ(26,"div",15)(27,"div",16)(28,"div",17)(29,"mat-form-field",18)(30,"mat-label"),e._uU(31,"Mobile No."),e.qZA(),e._UZ(32,"input",19),e.qZA(),e.TgZ(33,"div",20)(34,"p")(35,"span"),e._uU(36,"This Mobile no. is not registered with us"),e.qZA()(),e.TgZ(37,"p"),e._uU(38,"New to mysoulmate.co.in? "),e.TgZ(39,"a",21),e._uU(40,"Sign Up Free"),e.qZA()()()()(),e.TgZ(41,"input",22),e.NdJ("click",function(l){return i.sendOTP_login(l)}),e.qZA()(),e.YNc(42,P,17,4,"div",23),e.qZA()()()()()()(),e.TgZ(43,"div",24)(44,"a",25),e._UZ(45,"i",26),e.TgZ(46,"span"),e._uU(47,"Login"),e.qZA()()()()),2&s&&(e.xp6(1),e.Q6J("hidden",i.withoutLogin_headerShow),e.xp6(2),e.Q6J("hidden",i.afterLogin_headerShow),e.xp6(11),e.Q6J("hidden",i.afterSendOTP_Click),e.xp6(2),e.hij("OTP has been sent to ",i.nameShort(),""),e.xp6(4),e.Q6J("hidden",i.hide_Send_OTP),e.xp6(2),e.Q6J("hidden",i.hide_Send_OTP),e.xp6(3),e.Q6J("ngIf",!i.deActiveUser_Msg_Show),e.xp6(1),e.Q6J("formGroup",i.otpFormGroup)("hidden",i.hide_Send_OTP),e.xp6(7),e.Q6J("hidden",i.signUpMsg),e.xp6(8),e.Q6J("disabled",!i.otpFormGroup.valid),e.xp6(1),e.Q6J("ngIf",!i.afterSendOTP_Click))},dependencies:[d.O5,a.Fj,a.JJ,a.JL,a.wO,a.nD,a.sg,a.u,_.Nt,g.KE,g.hX,O.j,T.b,c.df,h.rH]})}return n})();var b=o(2570),w=o(4385),A=o(1948),L=o(6709),N=o(7392),x=o(8874);const C=[{path:"",component:U}];let I=(()=>{class n{static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275mod=e.oAB({type:n});static#i=this.\u0275inj=e.cJS({imports:[d.ez,a.u5,a.UX,_.c,w.LD,g.lN,A.Fk,L.p9,N.Ps,b.t,x.I,c.Xz,h.Bz.forChild(C)]})}return n})()}}]);