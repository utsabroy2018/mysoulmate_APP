"use strict";(self.webpackChunkhoroscope=self.webpackChunkhoroscope||[]).push([[758],{6758:(G,p,o)=>{o.r(p),o.d(p,{Otp_loginModule:()=>C});var d=o(6895),a=o(4006),t=o(4650),f=o(2498),h=o(2761),m=o(191),v=o(5543),c=o(4144),g=o(9549),O=o(4238),u=o(2440);const T=["ngOtpInput"];function M(n,_){if(1&n&&(t.TgZ(0,"div",27)(1,"div",28),t._uU(2),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.hij(" ",null==e.afterLoginMsg?null:e.afterLoginMsg.msg," ")}}function S(n,_){if(1&n){const e=t.EpF();t.TgZ(0,"ng-otp-input",39,40),t.NdJ("onInputChange",function(i){t.CHM(e);const r=t.oxw(2);return t.KtG(r.onOtpChange(i))}),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("config",e.config)}}function P(n,_){if(1&n){const e=t.EpF();t.TgZ(0,"div",29)(1,"label",30)(2,"div",31)(3,"p",32),t._uU(4,"Enter verification code"),t.qZA(),t.YNc(5,S,2,1,"ng-otp-input",33),t.qZA()(),t.TgZ(6,"label",34)(7,"button",12),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.resendOTP())}),t._UZ(8,"i",35),t._uU(9," Resend OTP"),t.qZA(),t.TgZ(10,"span"),t._uU(11),t.qZA()(),t.TgZ(12,"div",36)(13,"span"),t._uU(14," Your Otp has Expired"),t.qZA()(),t.TgZ(15,"div",37)(16,"input",38),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.login_Fn())}),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(5),t.Q6J("ngIf",e.showOtpComponent),t.xp6(6),t.Oqu(e.display_new),t.xp6(1),t.Q6J("hidden",e.showExpairMsg),t.xp6(4),t.Q6J("disabled",!e.otpFormGroup.valid||!e.verifyBtnActive)}}let U=(()=>{class n{constructor(e,s,i,r){this.service=e,this.router=s,this.msgService=i,this.sds=r,this.withoutLogin_headerShow=!0,this.afterLogin_headerShow=!0,this.signUpMsg=!0,this.hide_Send_OTP=!1,this.afterSendOTP_Click=!0,this.deActiveUser_Msg_Show=!0,this.showOtpMainBox=!0,this.showExpairMsg=!0,this.generateOTP_btn=!0,this.showOtpComponent=!0,this.config={allowNumbersOnly:!1,length:4,isPasswordInput:!1,disableAutoFocus:!1,placeholder:"",inputStyles:{width:"40px",height:"35px"}},this.getLocalSecrectUrl=this.sds.getLocalSecrectData(),this.otpFormGroup=new a.cw({otp_phone:new a.NI("",[a.kI.required,a.kI.minLength(10),a.kI.pattern("^((\\+91-?)|0)?[0-9]{10}$")])}),this.isLogin=this.service.login(),this.isLogin?(this.afterLogin_headerShow=!1,this.withoutLogin_headerShow=!0):(this.afterLogin_headerShow=!0,this.withoutLogin_headerShow=!1)}ngOnInit(){}timer_new(e){clearInterval(this.timerInt);let s=60*e,i="0",r=60;const l=e<10?"0":"";this.timerInt=setInterval(()=>{s--,0!=r?r--:r=59,i=r<10?"0"+r:r,this.display_new=`${l}${Math.floor(s/60)}:${i}`,"00:00"==this.display_new?(this.showExpairMsg=!1,clearInterval(this.timerInt)):this.showExpairMsg=!0},1e3)}resendOTP(){this.generateOTP(),this.timer_new(5)}onOtpChange(e){this.otp=e,4==this.otp.length?this.getOTP==this.otp?this.verifyBtnActive=!0:(this.verifyBtnActive=!1,this.msgService.errorMsg("OTP_NOT_MAT")):this.verifyBtnActive=!1}generateOTP(){this.service.global_service(1,"/user/login_otp",{data:btoa(JSON.stringify(this.otpFormGroup.controls.otp_phone.value))}).subscribe(e=>{this.getOPTResponse=e,1===this.getOPTResponse.suc&&(this.getOTP=this.sds.decrypt(this.getOPTResponse.otp)),2===this.getOPTResponse.suc&&this.msgService.errorMsg("MWRNG_MOB")})}sendOTP_login(e){this.signUpMsg=!0,this.deActiveUser_Msg_Show=!0,this.mobileNumber=this.otpFormGroup.controls.otp_phone.value.length,this.service.global_service(1,"/user/login_otp",{data:btoa(JSON.stringify(this.otpFormGroup.controls.otp_phone.value))}).subscribe(s=>{this.afterLoginMsg=s,1===this.afterLoginMsg.suc&&(this.deActiveUser_Msg_Show=!0,this.getOTP=this.sds.decrypt(this.afterLoginMsg.otp),10==this.mobileNumber&&this.otpFormGroup.valid?(this.afterSendOTP_Click=!1,this.hide_Send_OTP=!0,this.signUpMsg=!0,this.deActiveUser_Msg_Show=!0,this.generateOTP_btn=!1,this.showOtpMainBox=!0,this.timer_new(5)):(this.generateOTP_btn=!0,clearInterval(this.timerInt))),0===this.afterLoginMsg.suc&&(this.deActiveUser_Msg_Show=!1,this.signUpMsg=!0,this.deActiveUser_Msg=this.afterLoginMsg.msg),2===this.afterLoginMsg.suc&&(this.deActiveUser_Msg_Show=!0,this.signUpMsg=!1,this.deActiveUser_Msg=this.afterLoginMsg.msg)})}editeMobileNum(){this.afterSendOTP_Click=!0,this.hide_Send_OTP=!1}login_Fn(){this.loginDataStore={user_id:this.otpFormGroup.controls.otp_phone.value},this.getOTP==this.otp?this.service.global_service(1,"/user/get_login_data",{data:btoa(JSON.stringify(this.loginDataStore))}).subscribe(e=>{if(this.login_Data_respons=e,this.login_Data_respons.suc>0){const{plan_id:s,pay_name:i,id:r,user_email:l,user_id:I,user_name:y,profile_code:F}=this.login_Data_respons.user_data[0];this.sds.setLocalSecrectData({login_success:1,plan_id:s,pay_name:i,id:r,user_email:l,user_id:I,user_name:y,profile_code:F,profile_flag:this.login_Data_respons.user_data[0].profile_verify_flag?this.login_Data_respons.user_data[0].profile_verify_flag:"N"}),this.router.navigate(["/profile_list"]),this.currentUser={login_success:this.getLocalSecrectUrl.data.login_success,id:this.getLocalSecrectUrl.data.id,user_id:this.getLocalSecrectUrl.data.user_id,user_name:this.getLocalSecrectUrl.data.user_name}}else localStorage.setItem("login_success","0")}):this.msgService.errorMsg("OTP_NOT_MAT")}nameShort(){return this.otpFormGroup.controls.otp_phone.value.slice(0,4)+"XXXXXX"}static#t=this.\u0275fac=function(s){return new(s||n)(t.Y36(f.D),t.Y36(h.F0),t.Y36(m.e),t.Y36(v.U))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-otp_login"]],viewQuery:function(s,i){if(1&s&&t.Gf(T,5),2&s){let r;t.iGM(r=t.CRH())&&(i.ngOtpInput=r.first)}},decls:46,vars:11,consts:[[1,"rejistrationPageLogo","rejistrationPageLogo_Page"],[3,"hidden"],[1,"innerMain_wraper"],[1,"otp_wrapper"],[1,"col-sm-12"],[1,"white_block","white_blockOTP"],[1,"row"],[1,"title_sec_main"],[1,"innerDefaultPage"],[1,"iLaWub",3,"hidden"],[1,"otpMsg"],[1,"editOtp"],[3,"click"],[1,"otpField_Main"],["class","deActiveUser_Msg_otp",4,"ngIf"],[1,"otpField_Main_sub",3,"formGroup","hidden"],[1,"otpField_Sub_field"],[1,"field_outer_label","field_outer_label_OTP"],[1,"example-full-width"],["matInput","","type","tel","formControlName","otp_phone","minlength","10","maxlength","10"],[1,"validation_OTP",3,"hidden"],["routerLink","/home"],["type","button","value","Send OTP",3,"disabled","click"],["class","otpMain",4,"ngIf"],[1,"footer_bottomSec"],["routerLink","/home",1,"login_link_bot"],["aria-hidden","true",1,"fa","fa-sign-in"],[1,"deActiveUser_Msg_otp"],[1,"deActiveUser_Msg_otp_Sub"],[1,"otpMain"],[1,"otp"],[1,"field_outer_label","field_outer_labelOTPLogin"],[1,"a-o-i"],[3,"config","onInputChange",4,"ngIf"],[1,"resendOtp"],["aria-hidden","true",1,"fa","fa-refresh"],[1,"otpExpair",3,"hidden"],[1,"loginwithOTP"],["type","submit","value","Login",1,"otpLoginBtn",3,"disabled","click"],[3,"config","onInputChange"],["ngOtpInput",""]],template:function(s,i){1&s&&(t.TgZ(0,"div",0),t._UZ(1,"app-Before_login_header_N_Home",1),t.qZA(),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",4)(8,"div",7)(9,"h2"),t._uU(10,"Login with OTP "),t.qZA()(),t.TgZ(11,"div",8)(12,"div",9)(13,"div",10),t._uU(14),t.qZA(),t.TgZ(15,"div",11)(16,"a",12),t.NdJ("click",function(){return i.editeMobileNum()}),t._uU(17,"Edit"),t.qZA()()(),t.TgZ(18,"h3",1),t._uU(19,"Enter Mobile No."),t.qZA(),t.TgZ(20,"h4",1),t._uU(21,"We will send you an OTP to login"),t.qZA(),t.TgZ(22,"div",13),t.YNc(23,M,3,1,"div",14),t.TgZ(24,"div",15)(25,"div",16)(26,"div",17)(27,"mat-form-field",18)(28,"mat-label"),t._uU(29,"Mobile No."),t.qZA(),t._UZ(30,"input",19),t.qZA(),t.TgZ(31,"div",20)(32,"p")(33,"span"),t._uU(34,"This Mobile no. is not registered with us"),t.qZA()(),t.TgZ(35,"p"),t._uU(36,"New to mysoulmate.co.in? "),t.TgZ(37,"a",21),t._uU(38,"Sign Up Free"),t.qZA()()()()(),t.TgZ(39,"input",22),t.NdJ("click",function(l){return i.sendOTP_login(l)}),t.qZA()(),t.YNc(40,P,17,4,"div",23),t.qZA()()()()()()(),t.TgZ(41,"div",24)(42,"a",25),t._UZ(43,"i",26),t.TgZ(44,"span"),t._uU(45,"Login"),t.qZA()()()()),2&s&&(t.xp6(1),t.Q6J("hidden",i.withoutLogin_headerShow),t.xp6(11),t.Q6J("hidden",i.afterSendOTP_Click),t.xp6(2),t.hij("OTP has been sent to ",i.nameShort(),""),t.xp6(4),t.Q6J("hidden",i.hide_Send_OTP),t.xp6(2),t.Q6J("hidden",i.hide_Send_OTP),t.xp6(3),t.Q6J("ngIf",!i.deActiveUser_Msg_Show),t.xp6(1),t.Q6J("formGroup",i.otpFormGroup)("hidden",i.hide_Send_OTP),t.xp6(7),t.Q6J("hidden",i.signUpMsg),t.xp6(8),t.Q6J("disabled",!i.otpFormGroup.valid),t.xp6(1),t.Q6J("ngIf",!i.afterSendOTP_Click))},dependencies:[d.O5,a.Fj,a.JJ,a.JL,a.wO,a.nD,a.sg,a.u,c.Nt,g.KE,g.hX,O.j,u.df,h.rH]})}return n})();var Z=o(2570),b=o(4385),w=o(1948),A=o(6709),L=o(7392),N=o(8874);const x=[{path:"",component:U}];let C=(()=>{class n{static#t=this.\u0275fac=function(s){return new(s||n)};static#e=this.\u0275mod=t.oAB({type:n});static#i=this.\u0275inj=t.cJS({imports:[d.ez,a.u5,a.UX,c.c,b.LD,g.lN,w.Fk,A.p9,L.Ps,Z.t,N.I,u.Xz,h.Bz.forChild(x)]})}return n})()}}]);